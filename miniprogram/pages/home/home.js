"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const request_service_1 = require("../../services/request-service");
Page({
    data: {
        scrollHeight: '',
        background: [
            "../../img/swiperA.jpg",
            "../../img/swiperB.jpg",
            "../../img/swiperC.jpg"
        ],
        indicatorDots: true,
        vertical: false,
        autoplay: false,
        interval: 2000,
        duration: 500,
        indexImg: 0,
        option: [],
        optionShow: '',
        labelBoxIsNull: true,
        itemTitle: '行业',
        onlineSession: '',
        isHistory: '',
    },
    onLoad: function () {
        let that = this;
        for (let i = 0; i < that.data.option.length; i++) {
            var option = "option[" + i + "].isSelect";
            that.setData({
                [option]: false
            });
        }
        this.getBarImg();
        this.getOnlineSession();
        this.getAllBusiness();
    },
    onReady: function () {
        const that = this;
        that.computeScrollViewHeight();
    },
    onShow: function () {
        if (typeof this.getTabBar === 'function' &&
            this.getTabBar()) {
            this.getTabBar().setData({
                selected: 0
            });
        }
    },
    onHide: function () {
    },
    onUnload: function () {
    },
    onPullDownRefresh: function () {
    },
    onReachBottom: function () {
    },
    onShareAppMessage: function () {
    },
    getBarImg() {
        request_service_1.requestService.get('onlinePresentationsBanners/', {})
            .then(res => {
            console.log('轮播', res);
        });
    },
    getOnlineSession() {
        const that = this;
        request_service_1.requestService.get('onlinePresentations/', {}).then(res => {
            for (let i = 0; i < res.data.data.length; i++) {
                res.data.data[i].updateDate = this.timeHandle(res.data.data[i].updateDate);
            }
            that.setData({
                onlineSession: res.data.data
            });
        });
    },
    timeHandle(dateTime) {
        let date = dateTime.split(' ')[0];
        let time = dateTime.split(' ')[1];
        let dateNew = date.split('-')[1] + '-' + date.split('-')[2];
        let timeNew = time.split(':')[0] + ':' + time.split(':')[1];
        return (dateNew + ' ' + timeNew);
    },
    indexChange(event) {
        let that = this;
        console.log(event);
        var index = event.detail.current;
        that.setData({
            indexImg: index
        });
    },
    searchInput(e) {
        const that = this;
        that.getAllBusiness(e.detail.value);
    },
    clickLabel(event) {
        const that = this;
        console.log(event.currentTarget.dataset.info);
        const info = event.currentTarget.dataset.info;
        let isSelect = that.data.option[info].isSelect;
        var option = "option[" + info + "].isSelect";
        if (!isSelect) {
            var selected = "option[" + that.data.optionShow + "].isSelect";
            that.setData({
                [option]: !isSelect
            });
            if (that.data.optionShow !== '') {
                that.setData({
                    [selected]: !that.data.option[that.data.optionShow].isSelect
                });
            }
            that.setData({
                optionShow: info
            });
        }
        else {
            that.setData({
                [option]: !isSelect,
                optionShow: ''
            });
        }
        let isNull = true;
        if (that.data.optionShow === '') {
            isNull = true;
            that.getAllBusiness();
        }
        else {
            isNull = false;
            console.log('name', that.data.option[that.data.optionShow].name);
            that.getAllBusiness(that.data.option[that.data.optionShow].name);
        }
        that.setData({
            labelBoxIsNull: isNull
        });
    },
    getAllBusiness(business) {
        const that = this;
        if (business) {
            request_service_1.requestService.get('onlinePresentations/business/', { business }, {}, true, true)
                .then(res => {
                that.setData({
                    onlineSession: res.data.data
                });
            });
        }
        else {
            request_service_1.requestService.get('onlinePresentations/business/', {})
                .then(res => {
                that.setData({
                    option: res.data.data
                });
            });
        }
    },
    isHistory() {
        const that = this;
        if (that.data.isHistory == '') {
            that.setData({
                isHistory: true
            });
        }
        else {
            that.setData({
                isHistory: !that.data.isHistory
            });
        }
    },
    computeScrollViewHeight() {
        const that = this;
        let query = wx.createSelectorQuery();
        query.select('.swiper-wrap').boundingClientRect();
        query.select('.contentHead').boundingClientRect();
        query.exec(res => {
            let swiperHeight = res[0].height;
            let headHeight = res[1].height;
            let windowHeight = wx.getSystemInfoSync().windowHeight;
            let scrollHeight = windowHeight - swiperHeight - headHeight - 50;
            that.setData({
                scrollHeight: scrollHeight
            });
        });
    },
    toCloud(e) {
        const that = this;
        let info = e.currentTarget.dataset.info;
        let data = that.data.onlineSession[info];
        const sendData = JSON.stringify(data);
        wx.navigateTo({
            url: '../cloud/cloud?data=' + sendData
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaG9tZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImhvbWUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSxvRUFBOEQ7QUFFOUQsSUFBSSxDQUFDO0lBS0QsSUFBSSxFQUFFO1FBQ0YsWUFBWSxFQUFDLEVBQUU7UUFDZixVQUFVLEVBQUU7WUFDUix1QkFBdUI7WUFDdkIsdUJBQXVCO1lBQ3ZCLHVCQUF1QjtTQUMxQjtRQUNELGFBQWEsRUFBRSxJQUFJO1FBQ25CLFFBQVEsRUFBRSxLQUFLO1FBQ2YsUUFBUSxFQUFFLEtBQUs7UUFDZixRQUFRLEVBQUUsSUFBSTtRQUNkLFFBQVEsRUFBRSxHQUFHO1FBQ2IsUUFBUSxFQUFFLENBQUM7UUFFWCxNQUFNLEVBQUMsRUFXTjtRQUlELFVBQVUsRUFBQyxFQUFFO1FBRWIsY0FBYyxFQUFDLElBQUk7UUFDbkIsU0FBUyxFQUFDLElBQUk7UUFFZCxhQUFhLEVBQUMsRUFBRTtRQUVoQixTQUFTLEVBQUMsRUFBRTtLQUNmO0lBS0QsTUFBTSxFQUFFO1FBQ0osSUFBSSxJQUFJLEdBQUcsSUFBVyxDQUFDO1FBRXZCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDOUMsSUFBSSxNQUFNLEdBQUcsU0FBUyxHQUFDLENBQUMsR0FBQyxZQUFZLENBQUM7WUFDdEMsSUFBSSxDQUFDLE9BQU8sQ0FBQztnQkFDVCxDQUFDLE1BQU0sQ0FBQyxFQUFDLEtBQUs7YUFDakIsQ0FBQyxDQUFDO1NBQ047UUFFRCxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDakIsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7UUFDeEIsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO0lBRTFCLENBQUM7SUFLRCxPQUFPLEVBQUU7UUFDTCxNQUFNLElBQUksR0FBRyxJQUFXLENBQUM7UUFDekIsSUFBSSxD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TyxDQUFDLENBQUs7UUFDVCxNQUFNLElBQUksR0FBRyxJQUFXLENBQUM7UUFDekIsSUFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDO1FBQ3hDLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3pDLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDdEMsRUFBRSxDQUFDLFVBQVUsQ0FBQztZQUNWLEdBQUcsRUFBQyxzQkFBc0IsR0FBRyxRQUFRO1NBQ3hDLENBQUMsQ0FBQTtJQUNOLENBQUM7Q0FDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvLyAvLyBtaW5pcHJvZ3JhbS9wYWdlcy9ob21lL2hvbWUuanNcclxuaW1wb3J0IHtyZXF1ZXN0U2VydmljZX0gZnJvbSBcIi4uLy4uL3NlcnZpY2VzL3JlcXVlc3Qtc2VydmljZVwiO1xyXG5cclxuUGFnZSh7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDpobXpnaLnmoTliJ3lp4vmlbDmja5cclxuICAgICAqL1xyXG4gICAgZGF0YToge1xyXG4gICAgICAgIHNjcm9sbEhlaWdodDonJyxcclxuICAgICAgICBiYWNrZ3JvdW5kOiBbXHJcbiAgICAgICAgICAgIFwiLi4vLi4vaW1nL3N3aXBlckEuanBnXCIsXHJcbiAgICAgICAgICAgIFwiLi4vLi4vaW1nL3N3aXBlckIuanBnXCIsXHJcbiAgICAgICAgICAgIFwiLi4vLi4vaW1nL3N3aXBlckMuanBnXCJcclxuICAgICAgICBdLFxyXG4gICAgICAgIGluZGljYXRvckRvdHM6IHRydWUsXHJcbiAgICAgICAgdmVydGljYWw6IGZhbHNlLFxyXG4gICAgICAgIGF1dG9wbGF5OiBmYWxzZSxcclxuICAgICAgICBpbnRlcnZhbDogMjAwMCxcclxuICAgICAgICBkdXJhdGlvbjogNTAwLFxyXG4gICAgICAgIGluZGV4SW1nOiAwLFxyXG4gICAgICAgIC8vIOS4i+aLieiPnOWNlVxyXG4gICAgICAgIG9wdGlvbjpbXHJcbiAgICAgICAgICAgIC8vIHtuYW1lOifkupLogZTnvZEnfSxcclxuICAgICAgICAgICAgLy8ge25hbWU6J+mHkeiejSd9LFxyXG4gICAgICAgICAgICAvLyB7bmFtZTon5Zyf5pyo5bel56iLJ30sXHJcbiAgICAgICAgICAgIC8vIHtuYW1lOifljJblrabkuI7njq/looPmtYvor5UnfSxcclxuICAgICAgICAgICAgLy8ge25hbWU6J+eUn+eJqee7k+aehOS4juekvuS8muS6uuaWhyd9LFxyXG4gICAgICAgICAgICAvLyB7bmFtZTon5aSp5Zyw5Lq65ZKM6I2J5pyo5YWx55Sf5LiH54mp5ZKM6LCQJ30sXHJcbiAgICAgICAgICAgIC8vIHtuYW1lOifkupLogZTnvZEnfSxcclxuICAgICAgICAgICAgLy8ge25hbWU6J+S6kuiBlOe9kSd9LFxyXG4gICAgICAgICAgICAvLyB7bmFtZTon5LqS6IGU572RJ30sXHJcbiAgICAgICAgICAgIC8vIHtuYW1lOifkupLogZTnvZEnfSxcclxuICAgICAgICBdLFxyXG4gICAgICAgIC8vIOWtmOagh+etvuS4i+agh+eahOaVsOe7hFxyXG4gICAgICAgIC8vIG9wdGlvblNob3c6W10sXHJcbiAgICAgICAgLy8g5a2Y5qCH562+5LiL5qCHXHJcbiAgICAgICAgb3B0aW9uU2hvdzonJyxcclxuICAgICAgICAvLyDmmK/lkKbmmL7npLpsYWJlbEJveFxyXG4gICAgICAgIGxhYmVsQm94SXNOdWxsOnRydWUsXHJcbiAgICAgICAgaXRlbVRpdGxlOifooYzkuJonLFxyXG4gICAgICAgIC8vIOe6v+S4iuWuo+iusuS8muivpuaDhVxyXG4gICAgICAgIG9ubGluZVNlc3Npb246JycsXHJcbiAgICAgICAgLy8g5piv5ZCm5piv5b6A5bGKXHJcbiAgICAgICAgaXNIaXN0b3J5OicnLFxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOeUn+WRveWRqOacn+WHveaVsC0t55uR5ZCs6aG16Z2i5Yqg6L29XHJcbiAgICAgKi9cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxldCB0aGF0ID0gdGhpcyBhcyBhbnk7XHJcbiAgICAgICAgLy8g57uZ5pWw5o2u5re75Yqg5piv5ZCm6YCJ5Lit5a2X5q61XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGF0LmRhdGEub3B0aW9uLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBvcHRpb24gPSBcIm9wdGlvbltcIitpK1wiXS5pc1NlbGVjdFwiO1xyXG4gICAgICAgICAgICB0aGF0LnNldERhdGEoe1xyXG4gICAgICAgICAgICAgICAgW29wdGlvbl06ZmFsc2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOi9ruaSreWbvlxyXG4gICAgICAgIHRoaXMuZ2V0QmFySW1nKCk7XHJcbiAgICAgICAgdGhpcy5nZXRPbmxpbmVTZXNzaW9uKCk7XHJcbiAgICAgICAgdGhpcy5nZXRBbGxCdXNpbmVzcygpO1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnlJ/lkb3lkajmnJ/lh73mlbAtLeebkeWQrOmhtemdouWIneasoea4suafk+WujOaIkFxyXG4gICAgICovXHJcbiAgICBvblJlYWR5OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXMgYXMgYW55O1xyXG4gICAgICAgIHRoYXQuY29tcHV0ZVNjcm9sbFZpZXdIZWlnaHQoKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnlJ/lkb3lkajmnJ/lh73mlbAtLeebkeWQrOmhtemdouaYvuekulxyXG4gICAgICovXHJcbiAgICBvblNob3c6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuZ2V0VGFiQmFyID09PSAnZnVuY3Rpb24nICYmXHJcbiAgICAgICAgICAgIHRoaXMuZ2V0VGFiQmFyKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5nZXRUYWJCYXIoKS5zZXREYXRhKHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkOiAwXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOeUn+WRveWRqOacn+WHveaVsC0t55uR5ZCs6aG16Z2i6ZqQ6JePXHJcbiAgICAgKi9cclxuICAgIG9uSGlkZTogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnlJ/lkb3lkajmnJ/lh73mlbAtLeebkeWQrOmhtemdouWNuOi9vVxyXG4gICAgICovXHJcbiAgICBvblVubG9hZDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDpobXpnaLnm7jlhbPkuovku7blpITnkIblh73mlbAtLeebkeWQrOeUqOaIt+S4i+aLieWKqOS9nFxyXG4gICAgICovXHJcbiAgICBvblB1bGxEb3duUmVmcmVzaDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDpobXpnaLkuIrmi4nop6blupXkuovku7bnmoTlpITnkIblh73mlbBcclxuICAgICAqL1xyXG4gICAgb25SZWFjaEJvdHRvbTogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnlKjmiLfngrnlh7vlj7PkuIrop5LliIbkuqtcclxuICAgICAqL1xyXG4gICAgb25TaGFyZUFwcE1lc3NhZ2U6IGZ1bmN0aW9uICgpIDphbnl7XHJcblxyXG4gICAgfSxcclxuICAgIC8vIOi9ruaSreWbvlxyXG4gICAgZ2V0QmFySW1nKCl7XHJcbiAgICAgICAgcmVxdWVzdFNlcnZpY2UuZ2V0KCdvbmxpbmVQcmVzZW50YXRpb25zQmFubmVycy8nLHt9KVxyXG4gICAgICAgICAgICAudGhlbihyZXM9PntcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfova7mkq0nLHJlcyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAgLy8g57q/5LiK5a6j6K6y6K+m5oOFXHJcbiAgICBnZXRPbmxpbmVTZXNzaW9uKCl7XHJcbiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXMgYXMgYW55O1xyXG4gICAgICAgIHJlcXVlc3RTZXJ2aWNlLmdldCgnb25saW5lUHJlc2VudGF0aW9ucy8nLHt9KS50aGVuKHJlcz0+e1xyXG4gICAgICAgICAgICAvLyDlsIblkI7lj7Dml7bpl7TmoLzlvI/ljJbkuLowMS0xNSAwNDoxNeagvOW8j1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcy5kYXRhLmRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHJlcy5kYXRhLmRhdGFbaV0udXBkYXRlRGF0ZSA9IHRoaXMudGltZUhhbmRsZShyZXMuZGF0YS5kYXRhW2ldLnVwZGF0ZURhdGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoYXQuc2V0RGF0YSh7XHJcbiAgICAgICAgICAgICAgICBvbmxpbmVTZXNzaW9uOnJlcy5kYXRhLmRhdGFcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgIH0sXHJcbiAgICAvLyDml7bpl7TlpITnkIblh73mlbBcclxuICAgIHRpbWVIYW5kbGUoZGF0ZVRpbWU6c3RyaW5nKXtcclxuICAgICAgICBsZXQgZGF0ZSA9IGRhdGVUaW1lLnNwbGl0KCcgJylbMF07XHJcbiAgICAgICAgbGV0IHRpbWUgPSBkYXRlVGltZS5zcGxpdCgnICcpWzFdO1xyXG4gICAgICAgIGxldCBkYXRlTmV3ID0gZGF0ZS5zcGxpdCgnLScpWzFdICsgJy0nICsgZGF0ZS5zcGxpdCgnLScpWzJdO1xyXG4gICAgICAgIGxldCB0aW1lTmV3ID0gdGltZS5zcGxpdCgnOicpWzBdICsgJzonICsgdGltZS5zcGxpdCgnOicpWzFdO1xyXG4gICAgICAgIHJldHVybiAoZGF0ZU5ldyArICcgJyArIHRpbWVOZXcpO1xyXG4gICAgfSxcclxuICAgIGluZGV4Q2hhbmdlKGV2ZW50OmFueSl7XHJcbiAgICAgICAgbGV0IHRoYXQgPSB0aGlzIGFzIGFueTtcclxuICAgICAgICBjb25zb2xlLmxvZyhldmVudCk7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gZXZlbnQuZGV0YWlsLmN1cnJlbnQ7XHJcbiAgICAgICAgdGhhdC5zZXREYXRhKHtcclxuICAgICAgICAgICAgaW5kZXhJbWc6IGluZGV4XHJcbiAgICAgICAgfSlcclxuICAgIH0sXHJcbiAgICAvLyDmkJzntKLmoYZcclxuICAgIHNlYXJjaElucHV0KGU6YW55KXtcclxuICAgICAgICBjb25zdCB0aGF0ID0gdGhpcyBhcyBhbnk7XHJcbiAgICAgICAgdGhhdC5nZXRBbGxCdXNpbmVzcyhlLmRldGFpbC52YWx1ZSk7XHJcbiAgICB9LFxyXG4gICAgLy8g54K55Ye75qCH562+6Kem5Y+R77yI5Y2V6YCJ77yJXHJcbiAgICBjbGlja0xhYmVsKGV2ZW50OmFueSl7XHJcbiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXMgYXMgYW55O1xyXG4gICAgICAgIC8vIOeCueWHu+agh+etvuWIh+aNouWvueW6lOagh+etvumAieS4reeKtuaAgVxyXG4gICAgICAgIGNvbnNvbGUubG9nKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pbmZvKTtcclxuICAgICAgICBjb25zdCBpbmZvID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmluZm87XHJcbiAgICAgICAgbGV0IGlzU2VsZWN0ID0gdGhhdC5kYXRhLm9wdGlvbltpbmZvXS5pc1NlbGVjdDtcclxuICAgICAgICB2YXIgb3B0aW9uID0gXCJvcHRpb25bXCIraW5mbytcIl0uaXNTZWxlY3RcIjtcclxuICAgICAgICBpZiAoIWlzU2VsZWN0KXtcclxuICAgICAgICAgICAgLy9pc1NlbGVjdOS4umZhbHNlIOWmguaenOWNs+Wwhuiiq+eCueS6ru+8jOWImeWwhuWFtuS4i+agh2luZm/lrZjlhaVvcHRpb25TaG93IOS7peS+v+eCueS6ruWPpuS4gOS4queahOaXtuWAmeWlveaJvuWIsOWug+WPlua2iOeCueS6rlxyXG4gICAgICAgICAgICAvLyDmlLnlj5jmoIfnrb7pgInkuK3nirbmgIFcclxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkID0gXCJvcHRpb25bXCIrdGhhdC5kYXRhLm9wdGlvblNob3crXCJdLmlzU2VsZWN0XCI7XHJcbiAgICAgICAgICAgIHRoYXQuc2V0RGF0YSh7XHJcbiAgICAgICAgICAgICAgICBbb3B0aW9uXTohaXNTZWxlY3RcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIOWPlua2iOS4iuS4gOS4queCueS6rueahOagh+etvlxyXG4gICAgICAgICAgICBpZiAodGhhdC5kYXRhLm9wdGlvblNob3chPT0nJykge1xyXG4gICAgICAgICAgICAgICAgdGhhdC5zZXREYXRhKHtcclxuICAgICAgICAgICAgICAgICAgICBbc2VsZWN0ZWRdOiF0aGF0LmRhdGEub3B0aW9uW3RoYXQuZGF0YS5vcHRpb25TaG93XS5pc1NlbGVjdFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8g5a2Y5YWl54K55Lqu5qCH562+55qEaW5mb1xyXG4gICAgICAgICAgICB0aGF0LnNldERhdGEoe1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uU2hvdzppbmZvXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIOWPlua2iOagh+etvumAieS4reeKtuaAgSDnva4nJ+e7mW9wdGlvblNob3dcclxuICAgICAgICAgICAgdGhhdC5zZXREYXRhKHtcclxuICAgICAgICAgICAgICAgIFtvcHRpb25dOiFpc1NlbGVjdCxcclxuICAgICAgICAgICAgICAgIG9wdGlvblNob3c6JydcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOWmguaenG9wdGlvblNob3fkuLrnqbrvvIzor7TmmI7msqHmnInmoIfnrb7ooqvpgInkuK0g5YiZbGFiZWxCb3jkuLrnqbrvvIzotYvnu5lsYWJlbEJveElzTnVsbCDvvJp0cnVlIOWcqHd4bWzkuIrkuI3kuojmmL7npLpcclxuICAgICAgICBsZXQgaXNOdWxsID0gdHJ1ZTtcclxuICAgICAgICBpZiAodGhhdC5kYXRhLm9wdGlvblNob3cgPT09ICcnKSB7XHJcbiAgICAgICAgICAgIGlzTnVsbCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoYXQuZ2V0QWxsQnVzaW5lc3MoKTtcclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIGlzTnVsbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbmFtZScsdGhhdC5kYXRhLm9wdGlvblt0aGF0LmRhdGEub3B0aW9uU2hvd10ubmFtZSk7XHJcbiAgICAgICAgICAgIHRoYXQuZ2V0QWxsQnVzaW5lc3ModGhhdC5kYXRhLm9wdGlvblt0aGF0LmRhdGEub3B0aW9uU2hvd10ubmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoYXQuc2V0RGF0YSh7XHJcbiAgICAgICAgICAgIGxhYmVsQm94SXNOdWxsOmlzTnVsbFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIOmBjeWOhm9wdGlvbu+8jOWmguaenOagh+etvumDveacquiiq+mAieS4re+8jOWImWxhYmVsQm945Li656m677yM6LWL57uZbGFiZWxCb3hJc051bGwg77yadHJ1ZSDlnKh3eG1s5LiK5LiN5LqI5pi+56S6XHJcbiAgICAgICAgLy8gbGV0IGlzTnVsbCA9IHRydWU7XHJcbiAgICAgICAgLy8gdGhhdC5kYXRhLm9wdGlvbi5mb3JFYWNoKChpdGVtOmFueSk9PntcclxuICAgICAgICAvLyAgICAgaWYgKGl0ZW0uaXNTZWxlY3QpIHtcclxuICAgICAgICAvLyAgICAgICAgIGlzTnVsbCA9IGZhbHNlO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgLy8gdGhhdC5zZXREYXRhKHtcclxuICAgICAgICAvLyAgICAgbGFiZWxCb3hJc051bGw6aXNOdWxsXHJcbiAgICAgICAgLy8gfSk7XHJcbiAgICB9LFxyXG4gICAgLy8g54K55Ye75qCH562+6Kem5Y+R77yI5Y+v5aSa6YCJ77yJXHJcbiAgICAvLyBjbGlja0xhYmVsKGV2ZW50OmFueSl7XHJcbiAgICAvLyAgICAgbGV0IHRoYXQgPSB0aGlzIGFzIGFueTtcclxuICAgIC8vICAgICAvLyDngrnlh7vmoIfnrb7liIfmjaLlr7nlupTmoIfnrb7pgInkuK3nirbmgIFcclxuICAgIC8vICAgICBjb25zb2xlLmxvZyhldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuaW5mbyk7XHJcbiAgICAvLyAgICAgY29uc3QgaW5mbyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pbmZvO1xyXG4gICAgLy8gICAgIGxldCBpc1NlbGVjdCA9IHRoYXQuZGF0YS5vcHRpb25baW5mb10uaXNTZWxlY3Q7XHJcbiAgICAvLyAgICAgdmFyIG9wdGlvbiA9IFwib3B0aW9uU2hvd1tcIitpbmZvK1wiXVwiO1xyXG4gICAgLy8gICAgIGlmICghaXNTZWxlY3Qpe1xyXG4gICAgLy8gICAgICAgICAvL2lzU2VsZWN05Li6ZmFsc2Ug5aaC5p6c5Y2z5bCG6KKr54K55Lqu77yM5YiZ5bCG5YW25LiL5qCHaW5mb+WKoOWFpW9wdGlvblNob3fmlbDnu4TnmoRpbmZv5L2N572uIOS7peS+v+WIoOmZpOeahOaXtuWAmeWlveaJvuWIsFxyXG4gICAgLy8gICAgICAgICB0aGF0LnNldERhdGEoe1xyXG4gICAgLy8gICAgICAgICAgICAgW29wdGlvbl06aW5mb1xyXG4gICAgLy8gICAgICAgICB9KTtcclxuICAgIC8vICAgICB9IGVsc2Uge1xyXG4gICAgLy8gICAgICAgICAvLyDkuLp0cnVl77yM5Y2z5bCG6KKr5Y+W5raI77yM5YiZ6KaB5om+5Yiw5a+55bqUaW5mb+S9jee9ruWwhuWFtue9ruepulxyXG4gICAgLy8gICAgICAgICAvLyDov5nph4zotYvlgLxudWxs5q+U6LWL5YC8dW5kZWZpbmVk5ZKM56m66KaB5aW9XHJcbiAgICAvLyAgICAgICAgIHRoYXQuc2V0RGF0YSh7XHJcbiAgICAvLyAgICAgICAgICAgICBbb3B0aW9uXTpudWxsXHJcbiAgICAvLyAgICAgICAgIH0pO1xyXG4gICAgLy8gICAgIH1cclxuICAgIC8vICAgICAvLyDmlLnlj5jmoIfnrb7pgInkuK3nirbmgIFcclxuICAgIC8vICAgICB2YXIgb3B0aW9uID0gXCJvcHRpb25bXCIraW5mbytcIl0uaXNTZWxlY3RcIjtcclxuICAgIC8vICAgICB0aGF0LnNldERhdGEoe1xyXG4gICAgLy8gICAgICAgICBbb3B0aW9uXTohaXNTZWxlY3RcclxuICAgIC8vICAgICB9KTtcclxuICAgIC8vICAgICAvLyDpgY3ljoZvcHRpb27vvIzlpoLmnpzmoIfnrb7pg73mnKrooqvpgInkuK3vvIzliJlsYWJlbEJveOS4uuepuu+8jOi1i+e7mWxhYmVsQm94SXNOdWxsIO+8mnRydWUg5Zyod3htbOS4iuS4jeS6iOaYvuekulxyXG4gICAgLy8gICAgIGxldCBpc051bGwgPSB0cnVlO1xyXG4gICAgLy8gICAgIHRoYXQuZGF0YS5vcHRpb24uZm9yRWFjaCgoaXRlbTphbnkpPT57XHJcbiAgICAvLyAgICAgICAgIGlmIChpdGVtLmlzU2VsZWN0KSB7XHJcbiAgICAvLyAgICAgICAgICAgICBpc051bGwgPSBmYWxzZTtcclxuICAgIC8vICAgICAgICAgfVxyXG4gICAgLy8gICAgIH0pXHJcbiAgICAvLyAgICAgdGhhdC5zZXREYXRhKHtcclxuICAgIC8vICAgICAgICAgbGFiZWxCb3hJc051bGw6aXNOdWxsXHJcbiAgICAvLyAgICAgfSk7XHJcbiAgICAvL1xyXG4gICAgLy8gfSxcclxuICAgIC8vIOafpeivouaJgOacieihjOS4muaIluaMieihjOS4muafpeivouWuo+iusuS8mlxyXG4gICAgZ2V0QWxsQnVzaW5lc3MoYnVzaW5lc3M/OnN0cmluZyl7XHJcbiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXMgYXMgYW55O1xyXG4gICAgICAgIGlmIChidXNpbmVzcykge1xyXG4gICAgICAgICAgICAvLyDmjInooYzkuJrmn6Xor6JcclxuICAgICAgICAgICAgcmVxdWVzdFNlcnZpY2UuZ2V0KCdvbmxpbmVQcmVzZW50YXRpb25zL2J1c2luZXNzLycse2J1c2luZXNzfSx7fSx0cnVlLHRydWUpXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZXM9PntcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LnNldERhdGEoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbmxpbmVTZXNzaW9uOnJlcy5kYXRhLmRhdGFcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICByZXF1ZXN0U2VydmljZS5nZXQoJ29ubGluZVByZXNlbnRhdGlvbnMvYnVzaW5lc3MvJyx7fSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlcz0+e1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuc2V0RGF0YSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbjpyZXMuZGF0YS5kYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgfSxcclxuICAgIC8vIOW+gOWxiueUn+etm+mAiVxyXG4gICAgaXNIaXN0b3J5KCl7XHJcbiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXMgYXMgYW55O1xyXG4gICAgICAgIGlmICh0aGF0LmRhdGEuaXNIaXN0b3J5ID09ICcnKXtcclxuICAgICAgICAgICAgdGhhdC5zZXREYXRhKHtcclxuICAgICAgICAgICAgICAgIGlzSGlzdG9yeTp0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgdGhhdC5zZXREYXRhKHtcclxuICAgICAgICAgICAgICAgIGlzSGlzdG9yeTohdGhhdC5kYXRhLmlzSGlzdG9yeVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSxcclxuICAgIC8vIOiOt+WPluWJqeS4i+mrmOW6pue7mXNjcm9sbHZpZXfnlKhcclxuICAgIGNvbXB1dGVTY3JvbGxWaWV3SGVpZ2h0KCkge1xyXG4gICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzIGFzIGFueTtcclxuICAgICAgICAvLyDov5Tlm57kuIDkuKogU2VsZWN0b3JRdWVyeSDlr7nosaHlrp7kvotcclxuICAgICAgICBsZXQgcXVlcnkgPSB3eC5jcmVhdGVTZWxlY3RvclF1ZXJ5KCk7XHJcbiAgICAgICAgLy8g5Zyo5b2T5YmN6aG16Z2i5LiL6YCJ5oup56ys5LiA5Liq5Yy56YWN6YCJ5oup5ZmoIHNlbGVjdG9yIOeahOiKgueCueOAgui/lOWbnuS4gOS4qiBOb2Rlc1JlZiDlr7nosaHlrp7kvovvvIzlj6/ku6XnlKjkuo7ojrflj5boioLngrnkv6Hmga9cclxuICAgICAgICBxdWVyeS5zZWxlY3QoJy5zd2lwZXItd3JhcCcpLmJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIHF1ZXJ5LnNlbGVjdCgnLmNvbnRlbnRIZWFkJykuYm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgLy8g5omn6KGM5omA5pyJ55qE6K+35rGC44CC6K+35rGC57uT5p6c5oyJ6K+35rGC5qyh5bqP5p6E5oiQ5pWw57uE77yM5ZyoY2FsbGJhY2vnmoTnrKzkuIDkuKrlj4LmlbDkuK3ov5Tlm55cclxuICAgICAgICBxdWVyeS5leGVjKHJlcyA9PiB7XHJcbiAgICAgICAgICAgIGxldCBzd2lwZXJIZWlnaHQgPSByZXNbMF0uaGVpZ2h0O1xyXG4gICAgICAgICAgICBsZXQgaGVhZEhlaWdodCA9IHJlc1sxXS5oZWlnaHQ7XHJcbiAgICAgICAgICAgIC8vIHd4LmdldFN5c3RlbUluZm9TeW5jKCkg5Y+v5Lul5b6X5Yiw6K6+5aSH55qE5ZCE56eN5L+h5oGv77yM5YWz5LqO6auY5bqm55qE5Y+C5pWw5pyJ5Lik5Liq77yM5LiA5Liq5piv5bGP5bmV6auY5bqmIHNjcmVlbkhlaWdodO+8jOS4gOS4quaYr+WPr+S9v+eUqOeql+WPo+mrmOW6piB3aW5kb3dIZWlnaHTjgILms6jmhI/orqHnrpfnmoTml7blgJnopoHnlKggd2luZG93SGVpZ2h077yM6L+Z5qC3566X5Ye65p2l55qE6auY5bqm5omN5piv5a+555qE44CCc2NyZWVuSGVpZ2h05piv5omL5py655qE5bGP5bmV6auY5bqm77yM5YyF5ZCr5LqG5omL5py655qE54q25oCB5qCP5ZKM5bCP56iL5bqP5qCH6aKY5qCP44CCXHJcbiAgICAgICAgICAgIGxldCB3aW5kb3dIZWlnaHQgPSB3eC5nZXRTeXN0ZW1JbmZvU3luYygpLndpbmRvd0hlaWdodDtcclxuICAgICAgICAgICAgLy8gNTDmmK90YWLpq5jluqZcclxuICAgICAgICAgICAgbGV0IHNjcm9sbEhlaWdodCA9IHdpbmRvd0hlaWdodCAtIHN3aXBlckhlaWdodCAtIGhlYWRIZWlnaHQgLSA1MDtcclxuICAgICAgICAgICAgdGhhdC5zZXREYXRhKHtcclxuICAgICAgICAgICAgICAgIHNjcm9sbEhlaWdodDogc2Nyb2xsSGVpZ2h0XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgIH0sXHJcbiAgICB0b0Nsb3VkKGU6YW55KXtcclxuICAgICAgICBjb25zdCB0aGF0ID0gdGhpcyBhcyBhbnk7XHJcbiAgICAgICAgbGV0IGluZm8gPSBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pbmZvO1xyXG4gICAgICAgIGxldCBkYXRhID0gdGhhdC5kYXRhLm9ubGluZVNlc3Npb25baW5mb107XHJcbiAgICAgICAgY29uc3Qgc2VuZERhdGEgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcclxuICAgICAgICB3eC5uYXZpZ2F0ZVRvKHtcclxuICAgICAgICAgICAgdXJsOicuLi9jbG91ZC9jbG91ZD9kYXRhPScgKyBzZW5kRGF0YVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn0pXHJcbiJdfQ==