"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const request_service_1 = require("../../services/request-service");
Page({
    data: {
        scrollHeight: '',
        background: [
            "../../img/swiperA.jpg",
            "../../img/swiperB.jpg",
            "../../img/swiperC.jpg"
        ],
        indicatorDots: true,
        vertical: false,
        autoplay: false,
        interval: 2000,
        duration: 500,
        indexImg: 0,
        option: [],
        optionShow: '',
        labelBoxIsNull: true,
        itemTitle: '行业',
        onlineSession: '',
        isHistory: '',
    },
    onLoad: function () {
        let that = this;
        for (let i = 0; i < that.data.option.length; i++) {
            var option = "option[" + i + "].isSelect";
            that.setData({
                [option]: false
            });
        }
        this.getBarImg();
        this.getOnlineSession();
        this.getAllBusiness();
    },
    onReady: function () {
        const that = this;
        that.computeScrollViewHeight();
    },
    onShow: function () {
        if (typeof this.getTabBar === 'function' &&
            this.getTabBar()) {
            this.getTabBar().setData({
                selected: 0
            });
        }
    },
    onHide: function () {
    },
    onUnload: function () {
    },
    onPullDownRefresh: function () {
    },
    onReachBottom: function () {
    },
    onShareAppMessage: function () {
    },
    getBarImg() {
        request_service_1.requestService.get('onlinePresentationsBanners/', {})
            .then(res => {
            console.log('轮播', res);
        });
    },
    getOnlineSession() {
        const that = this;
        request_service_1.requestService.get('onlinePresentations/', {}).then(res => {
            for (let i = 0; i < res.data.data.length; i++) {
                res.data.data[i].updateDate = this.timeHandle(res.data.data[i].updateDate);
            }
            that.setData({
                onlineSession: res.data.data
            });
        });
    },
    timeHandle(dateTime) {
        let date = dateTime.split(' ')[0];
        let time = dateTime.split(' ')[1];
        let dateNew = date.split('-')[1] + '-' + date.split('-')[2];
        let timeNew = time.split(':')[0] + ':' + time.split(':')[1];
        return (dateNew + ' ' + timeNew);
    },
    indexChange(event) {
        let that = this;
        console.log(event);
        var index = event.detail.current;
        that.setData({
            indexImg: index
        });
    },
    searchInput(e) {
        const that = this;
        that.getAllBusiness(e.detail.value);
    },
    searchIsNull(e) {
        const that = this;
        if (!e.detail.value) {
            that.getOnlineSession();
        }
    },
    clickLabel(event) {
        const that = this;
        console.log(event.currentTarget.dataset.info);
        const info = event.currentTarget.dataset.info;
        let isSelect = that.data.option[info].isSelect;
        var option = "option[" + info + "].isSelect";
        if (!isSelect) {
            var selected = "option[" + that.data.optionShow + "].isSelect";
            that.setData({
                [option]: !isSelect
            });
            if (that.data.optionShow !== '') {
                that.setData({
                    [selected]: !that.data.option[that.data.optionShow].isSelect
                });
            }
            that.setData({
                optionShow: info
            });
        }
        else {
            that.setData({
                [option]: !isSelect,
                optionShow: ''
            });
        }
        let isNull = true;
        if (that.data.optionShow === '') {
            isNull = true;
            that.getOnlineSession();
        }
        else {
            isNull = false;
            console.log('name', that.data.option[that.data.optionShow].name);
            that.getAllBusiness(that.data.option[that.data.optionShow].name);
        }
        that.setData({
            labelBoxIsNull: isNull
        });
    },
    getAllBusiness(business) {
        const that = this;
        if (business) {
            request_service_1.requestService.get('onlinePresentations/business/', { business }, {}, true, true)
                .then(res => {
                that.setData({
                    onlineSession: res.data.data
                });
            });
        }
        else {
            request_service_1.requestService.get('onlinePresentations/business/', {})
                .then(res => {
                that.setData({
                    option: res.data.data
                });
            });
        }
    },
    isHistory() {
        const that = this;
        if (that.data.isHistory == '') {
            that.setData({
                isHistory: true
            });
        }
        else {
            that.setData({
                isHistory: !that.data.isHistory
            });
        }
    },
    computeScrollViewHeight() {
        const that = this;
        let query = wx.createSelectorQuery();
        query.select('.swiper-wrap').boundingClientRect();
        query.select('.contentHead').boundingClientRect();
        query.exec(res => {
            let swiperHeight = res[0].height;
            let headHeight = res[1].height;
            let windowHeight = wx.getSystemInfoSync().windowHeight;
            let scrollHeight = windowHeight - swiperHeight - headHeight - 50;
            that.setData({
                scrollHeight: scrollHeight
            });
        });
    },
    toCloud(e) {
        const that = this;
        let info = e.currentTarget.dataset.info;
        let data = that.data.onlineSession[info];
        const sendData = JSON.stringify(data);
        wx.navigateTo({
            url: '../cloud/cloud?data=' + sendData
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaG9tZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImhvbWUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSxvRUFBOEQ7QUFFOUQsSUFBSSxDQUFDO0lBS0QsSUFBSSxFQUFFO1FBQ0YsWUFBWSxFQUFDLEVBQUU7UUFDZixVQUFVLEVBQUU7WUFDUix1QkFBdUI7WUFDdkIsdUJBQXVCO1lBQ3ZCLHVCQUF1QjtTQUMxQjtRQUNELGFBQWEsRUFBRSxJQUFJO1FBQ25CLFFBQVEsRUFBRSxLQUFLO1FBQ2YsUUFBUSxFQUFFLEtBQUs7UUFDZixRQUFRLEVBQUUsSUFBSTtRQUNkLFFBQVEsRUFBRSxHQUFHO1FBQ2IsUUFBUSxFQUFFLENBQUM7UUFFWCxNQUFNLEVBQUMsRUFXTjtRQUlELFVBQVUsRUFBQyxFQUFFO1FBRWIsY0FBYyxFQUFDLElBQUk7UUFDbkIsU0FBUyxFQUFDLElBQUk7UUFFZCxhQUFhLEVBQUMsRUFBRTtRQUVoQixTQUFTLEVBQUMsRUFBRTtLQUNmO0lBS0QsTUFBTSxFQUFFO1FBQ0osSUFBSSxJQUFJLEdBQUcsSUFBVyxDQUFDO1FBRXZCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDOUMsSUFBSSxNQUFNLEdBQUcsU0FBUyxHQUFDLENBQUMsR0FBQyxZQUFZLENBQUM7WUFDdEMsSUFBSSxDQUFDLE9BQU8sQ0FBQztnQkFDVCxDQUFDLE1BQU0sQ0FBQyxFQUFDLEtBQUs7YUFDakIsQ0FBQyxDQUFDO1NBQ047UUFFRCxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDakIsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7UUFDeEIsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO0lBRTFCLENBQUM7SUFLRCxPQUFPLEVBQUU7UUFDTCxNQUFNLElBQUksR0FBRyxJQUFXLENBQUM7UUFDekIsSUFBSSxD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LEdBQUcsWUFBWSxHQUFHLFlBQVksR0FBRyxVQUFVLEdBQUcsRUFBRSxDQUFDO1lBQ2pFLElBQUksQ0FBQyxPQUFPLENBQUM7Z0JBQ1QsWUFBWSxFQUFFLFlBQVk7YUFDN0IsQ0FBQyxDQUFBO1FBQ04sQ0FBQyxDQUFDLENBQUE7SUFDTixDQUFDO0lBQ0QsT0FBTyxDQUFDLENBQUs7UUFDVCxNQUFNLElBQUksR0FBRyxJQUFXLENBQUM7UUFDekIsSUFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDO1FBQ3hDLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3pDLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDdEMsRUFBRSxDQUFDLFVBQVUsQ0FBQztZQUNWLEdBQUcsRUFBQyxzQkFBc0IsR0FBRyxRQUFRO1NBQ3hDLENBQUMsQ0FBQTtJQUNOLENBQUM7Q0FDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvLyAvLyBtaW5pcHJvZ3JhbS9wYWdlcy9ob21lL2hvbWUuanNcclxuaW1wb3J0IHtyZXF1ZXN0U2VydmljZX0gZnJvbSBcIi4uLy4uL3NlcnZpY2VzL3JlcXVlc3Qtc2VydmljZVwiO1xyXG5cclxuUGFnZSh7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDpobXpnaLnmoTliJ3lp4vmlbDmja5cclxuICAgICAqL1xyXG4gICAgZGF0YToge1xyXG4gICAgICAgIHNjcm9sbEhlaWdodDonJyxcclxuICAgICAgICBiYWNrZ3JvdW5kOiBbXHJcbiAgICAgICAgICAgIFwiLi4vLi4vaW1nL3N3aXBlckEuanBnXCIsXHJcbiAgICAgICAgICAgIFwiLi4vLi4vaW1nL3N3aXBlckIuanBnXCIsXHJcbiAgICAgICAgICAgIFwiLi4vLi4vaW1nL3N3aXBlckMuanBnXCJcclxuICAgICAgICBdLFxyXG4gICAgICAgIGluZGljYXRvckRvdHM6IHRydWUsXHJcbiAgICAgICAgdmVydGljYWw6IGZhbHNlLFxyXG4gICAgICAgIGF1dG9wbGF5OiBmYWxzZSxcclxuICAgICAgICBpbnRlcnZhbDogMjAwMCxcclxuICAgICAgICBkdXJhdGlvbjogNTAwLFxyXG4gICAgICAgIGluZGV4SW1nOiAwLFxyXG4gICAgICAgIC8vIOS4i+aLieiPnOWNlVxyXG4gICAgICAgIG9wdGlvbjpbXHJcbiAgICAgICAgICAgIC8vIHtuYW1lOifkupLogZTnvZEnfSxcclxuICAgICAgICAgICAgLy8ge25hbWU6J+mHkeiejSd9LFxyXG4gICAgICAgICAgICAvLyB7bmFtZTon5Zyf5pyo5bel56iLJ30sXHJcbiAgICAgICAgICAgIC8vIHtuYW1lOifljJblrabkuI7njq/looPmtYvor5UnfSxcclxuICAgICAgICAgICAgLy8ge25hbWU6J+eUn+eJqee7k+aehOS4juekvuS8muS6uuaWhyd9LFxyXG4gICAgICAgICAgICAvLyB7bmFtZTon5aSp5Zyw5Lq65ZKM6I2J5pyo5YWx55Sf5LiH54mp5ZKM6LCQJ30sXHJcbiAgICAgICAgICAgIC8vIHtuYW1lOifkupLogZTnvZEnfSxcclxuICAgICAgICAgICAgLy8ge25hbWU6J+S6kuiBlOe9kSd9LFxyXG4gICAgICAgICAgICAvLyB7bmFtZTon5LqS6IGU572RJ30sXHJcbiAgICAgICAgICAgIC8vIHtuYW1lOifkupLogZTnvZEnfSxcclxuICAgICAgICBdLFxyXG4gICAgICAgIC8vIOWtmOagh+etvuS4i+agh+eahOaVsOe7hFxyXG4gICAgICAgIC8vIG9wdGlvblNob3c6W10sXHJcbiAgICAgICAgLy8g5a2Y5qCH562+5LiL5qCHXHJcbiAgICAgICAgb3B0aW9uU2hvdzonJyxcclxuICAgICAgICAvLyDmmK/lkKbmmL7npLpsYWJlbEJveFxyXG4gICAgICAgIGxhYmVsQm94SXNOdWxsOnRydWUsXHJcbiAgICAgICAgaXRlbVRpdGxlOifooYzkuJonLFxyXG4gICAgICAgIC8vIOe6v+S4iuWuo+iusuS8muivpuaDhVxyXG4gICAgICAgIG9ubGluZVNlc3Npb246JycsXHJcbiAgICAgICAgLy8g5piv5ZCm5piv5b6A5bGKXHJcbiAgICAgICAgaXNIaXN0b3J5OicnLFxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOeUn+WRveWRqOacn+WHveaVsC0t55uR5ZCs6aG16Z2i5Yqg6L29XHJcbiAgICAgKi9cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxldCB0aGF0ID0gdGhpcyBhcyBhbnk7XHJcbiAgICAgICAgLy8g57uZ5pWw5o2u5re75Yqg5piv5ZCm6YCJ5Lit5a2X5q61XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGF0LmRhdGEub3B0aW9uLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBvcHRpb24gPSBcIm9wdGlvbltcIitpK1wiXS5pc1NlbGVjdFwiO1xyXG4gICAgICAgICAgICB0aGF0LnNldERhdGEoe1xyXG4gICAgICAgICAgICAgICAgW29wdGlvbl06ZmFsc2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOi9ruaSreWbvlxyXG4gICAgICAgIHRoaXMuZ2V0QmFySW1nKCk7XHJcbiAgICAgICAgdGhpcy5nZXRPbmxpbmVTZXNzaW9uKCk7XHJcbiAgICAgICAgdGhpcy5nZXRBbGxCdXNpbmVzcygpO1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnlJ/lkb3lkajmnJ/lh73mlbAtLeebkeWQrOmhtemdouWIneasoea4suafk+WujOaIkFxyXG4gICAgICovXHJcbiAgICBvblJlYWR5OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXMgYXMgYW55O1xyXG4gICAgICAgIHRoYXQuY29tcHV0ZVNjcm9sbFZpZXdIZWlnaHQoKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnlJ/lkb3lkajmnJ/lh73mlbAtLeebkeWQrOmhtemdouaYvuekulxyXG4gICAgICovXHJcbiAgICBvblNob3c6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuZ2V0VGFiQmFyID09PSAnZnVuY3Rpb24nICYmXHJcbiAgICAgICAgICAgIHRoaXMuZ2V0VGFiQmFyKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5nZXRUYWJCYXIoKS5zZXREYXRhKHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkOiAwXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOeUn+WRveWRqOacn+WHveaVsC0t55uR5ZCs6aG16Z2i6ZqQ6JePXHJcbiAgICAgKi9cclxuICAgIG9uSGlkZTogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnlJ/lkb3lkajmnJ/lh73mlbAtLeebkeWQrOmhtemdouWNuOi9vVxyXG4gICAgICovXHJcbiAgICBvblVubG9hZDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDpobXpnaLnm7jlhbPkuovku7blpITnkIblh73mlbAtLeebkeWQrOeUqOaIt+S4i+aLieWKqOS9nFxyXG4gICAgICovXHJcbiAgICBvblB1bGxEb3duUmVmcmVzaDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDpobXpnaLkuIrmi4nop6blupXkuovku7bnmoTlpITnkIblh73mlbBcclxuICAgICAqL1xyXG4gICAgb25SZWFjaEJvdHRvbTogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnlKjmiLfngrnlh7vlj7PkuIrop5LliIbkuqtcclxuICAgICAqL1xyXG4gICAgb25TaGFyZUFwcE1lc3NhZ2U6IGZ1bmN0aW9uICgpIDphbnl7XHJcblxyXG4gICAgfSxcclxuICAgIC8vIOi9ruaSreWbvlxyXG4gICAgZ2V0QmFySW1nKCl7XHJcbiAgICAgICAgcmVxdWVzdFNlcnZpY2UuZ2V0KCdvbmxpbmVQcmVzZW50YXRpb25zQmFubmVycy8nLHt9KVxyXG4gICAgICAgICAgICAudGhlbihyZXM9PntcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfova7mkq0nLHJlcyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAgLy8g57q/5LiK5a6j6K6y6K+m5oOFXHJcbiAgICBnZXRPbmxpbmVTZXNzaW9uKCl7XHJcbiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXMgYXMgYW55O1xyXG4gICAgICAgIHJlcXVlc3RTZXJ2aWNlLmdldCgnb25saW5lUHJlc2VudGF0aW9ucy8nLHt9KS50aGVuKHJlcz0+e1xyXG4gICAgICAgICAgICAvLyDlsIblkI7lj7Dml7bpl7TmoLzlvI/ljJbkuLowMS0xNSAwNDoxNeagvOW8j1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcy5kYXRhLmRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHJlcy5kYXRhLmRhdGFbaV0udXBkYXRlRGF0ZSA9IHRoaXMudGltZUhhbmRsZShyZXMuZGF0YS5kYXRhW2ldLnVwZGF0ZURhdGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoYXQuc2V0RGF0YSh7XHJcbiAgICAgICAgICAgICAgICBvbmxpbmVTZXNzaW9uOnJlcy5kYXRhLmRhdGFcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgIH0sXHJcbiAgICAvLyDml7bpl7TlpITnkIblh73mlbBcclxuICAgIHRpbWVIYW5kbGUoZGF0ZVRpbWU6c3RyaW5nKXtcclxuICAgICAgICBsZXQgZGF0ZSA9IGRhdGVUaW1lLnNwbGl0KCcgJylbMF07XHJcbiAgICAgICAgbGV0IHRpbWUgPSBkYXRlVGltZS5zcGxpdCgnICcpWzFdO1xyXG4gICAgICAgIGxldCBkYXRlTmV3ID0gZGF0ZS5zcGxpdCgnLScpWzFdICsgJy0nICsgZGF0ZS5zcGxpdCgnLScpWzJdO1xyXG4gICAgICAgIGxldCB0aW1lTmV3ID0gdGltZS5zcGxpdCgnOicpWzBdICsgJzonICsgdGltZS5zcGxpdCgnOicpWzFdO1xyXG4gICAgICAgIHJldHVybiAoZGF0ZU5ldyArICcgJyArIHRpbWVOZXcpO1xyXG4gICAgfSxcclxuICAgIGluZGV4Q2hhbmdlKGV2ZW50OmFueSl7XHJcbiAgICAgICAgbGV0IHRoYXQgPSB0aGlzIGFzIGFueTtcclxuICAgICAgICBjb25zb2xlLmxvZyhldmVudCk7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gZXZlbnQuZGV0YWlsLmN1cnJlbnQ7XHJcbiAgICAgICAgdGhhdC5zZXREYXRhKHtcclxuICAgICAgICAgICAgaW5kZXhJbWc6IGluZGV4XHJcbiAgICAgICAgfSlcclxuICAgIH0sXHJcbiAgICAvLyDmkJzntKLmoYZcclxuICAgIC8vIOeCueWHu+WujOaIkFxyXG4gICAgc2VhcmNoSW5wdXQoZTphbnkpe1xyXG4gICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzIGFzIGFueTtcclxuICAgICAgICB0aGF0LmdldEFsbEJ1c2luZXNzKGUuZGV0YWlsLnZhbHVlKTtcclxuICAgIH0sXHJcbiAgICAvLyDlpLHnhKbml7ZcclxuICAgIHNlYXJjaElzTnVsbChlOmFueSl7XHJcbiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXMgYXMgYW55O1xyXG4gICAgICAgIC8vIOiLpei+k+WFpeahhuS4uuepuu+8jOWImeafpeivouaJgOaciVxyXG4gICAgICAgIGlmICghZS5kZXRhaWwudmFsdWUpIHtcclxuICAgICAgICAgICAgdGhhdC5nZXRPbmxpbmVTZXNzaW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vIOeCueWHu+agh+etvuinpuWPke+8iOWNlemAie+8iVxyXG4gICAgY2xpY2tMYWJlbChldmVudDphbnkpe1xyXG4gICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzIGFzIGFueTtcclxuICAgICAgICAvLyDngrnlh7vmoIfnrb7liIfmjaLlr7nlupTmoIfnrb7pgInkuK3nirbmgIFcclxuICAgICAgICBjb25zb2xlLmxvZyhldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuaW5mbyk7XHJcbiAgICAgICAgY29uc3QgaW5mbyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pbmZvO1xyXG4gICAgICAgIGxldCBpc1NlbGVjdCA9IHRoYXQuZGF0YS5vcHRpb25baW5mb10uaXNTZWxlY3Q7XHJcbiAgICAgICAgdmFyIG9wdGlvbiA9IFwib3B0aW9uW1wiK2luZm8rXCJdLmlzU2VsZWN0XCI7XHJcbiAgICAgICAgaWYgKCFpc1NlbGVjdCl7XHJcbiAgICAgICAgICAgIC8vaXNTZWxlY3TkuLpmYWxzZSDlpoLmnpzljbPlsIbooqvngrnkuq7vvIzliJnlsIblhbbkuIvmoIdpbmZv5a2Y5YWlb3B0aW9uU2hvdyDku6Xkvr/ngrnkuq7lj6bkuIDkuKrnmoTml7blgJnlpb3mib7liLDlroPlj5bmtojngrnkuq5cclxuICAgICAgICAgICAgLy8g5pS55Y+Y5qCH562+6YCJ5Lit54q25oCBXHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZCA9IFwib3B0aW9uW1wiK3RoYXQuZGF0YS5vcHRpb25TaG93K1wiXS5pc1NlbGVjdFwiO1xyXG4gICAgICAgICAgICB0aGF0LnNldERhdGEoe1xyXG4gICAgICAgICAgICAgICAgW29wdGlvbl06IWlzU2VsZWN0XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyDlj5bmtojkuIrkuIDkuKrngrnkuq7nmoTmoIfnrb5cclxuICAgICAgICAgICAgaWYgKHRoYXQuZGF0YS5vcHRpb25TaG93IT09JycpIHtcclxuICAgICAgICAgICAgICAgIHRoYXQuc2V0RGF0YSh7XHJcbiAgICAgICAgICAgICAgICAgICAgW3NlbGVjdGVkXTohdGhhdC5kYXRhLm9wdGlvblt0aGF0LmRhdGEub3B0aW9uU2hvd10uaXNTZWxlY3RcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIOWtmOWFpeeCueS6ruagh+etvueahGluZm9cclxuICAgICAgICAgICAgdGhhdC5zZXREYXRhKHtcclxuICAgICAgICAgICAgICAgIG9wdGlvblNob3c6aW5mb1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyDlj5bmtojmoIfnrb7pgInkuK3nirbmgIEg572uJyfnu5lvcHRpb25TaG93XHJcbiAgICAgICAgICAgIHRoYXQuc2V0RGF0YSh7XHJcbiAgICAgICAgICAgICAgICBbb3B0aW9uXTohaXNTZWxlY3QsXHJcbiAgICAgICAgICAgICAgICBvcHRpb25TaG93OicnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDlpoLmnpxvcHRpb25TaG935Li656m677yM6K+05piO5rKh5pyJ5qCH562+6KKr6YCJ5LitIOWImWxhYmVsQm945Li656m677yM6LWL57uZbGFiZWxCb3hJc051bGwg77yadHJ1ZSDlnKh3eG1s5LiK5LiN5LqI5pi+56S6XHJcbiAgICAgICAgbGV0IGlzTnVsbCA9IHRydWU7XHJcbiAgICAgICAgaWYgKHRoYXQuZGF0YS5vcHRpb25TaG93ID09PSAnJykge1xyXG4gICAgICAgICAgICBpc051bGwgPSB0cnVlO1xyXG4gICAgICAgICAgICAvLyDmoIfnrb7ooqvlj5bmtojliJnmn6Xor6LmmL7npLrmiYDmnInnmoTlrqPorrLkvJpcclxuICAgICAgICAgICAgdGhhdC5nZXRPbmxpbmVTZXNzaW9uKCk7XHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICBpc051bGwgPSBmYWxzZTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ25hbWUnLHRoYXQuZGF0YS5vcHRpb25bdGhhdC5kYXRhLm9wdGlvblNob3ddLm5hbWUpO1xyXG4gICAgICAgICAgICB0aGF0LmdldEFsbEJ1c2luZXNzKHRoYXQuZGF0YS5vcHRpb25bdGhhdC5kYXRhLm9wdGlvblNob3ddLm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGF0LnNldERhdGEoe1xyXG4gICAgICAgICAgICBsYWJlbEJveElzTnVsbDppc051bGxcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICAvLyDngrnlh7vmoIfnrb7op6blj5HvvIjlj6/lpJrpgInvvIlcclxuICAgIC8vIGNsaWNrTGFiZWwoZXZlbnQ6YW55KXtcclxuICAgIC8vICAgICBsZXQgdGhhdCA9IHRoaXMgYXMgYW55O1xyXG4gICAgLy8gICAgIC8vIOeCueWHu+agh+etvuWIh+aNouWvueW6lOagh+etvumAieS4reeKtuaAgVxyXG4gICAgLy8gICAgIGNvbnNvbGUubG9nKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pbmZvKTtcclxuICAgIC8vICAgICBjb25zdCBpbmZvID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmluZm87XHJcbiAgICAvLyAgICAgbGV0IGlzU2VsZWN0ID0gdGhhdC5kYXRhLm9wdGlvbltpbmZvXS5pc1NlbGVjdDtcclxuICAgIC8vICAgICB2YXIgb3B0aW9uID0gXCJvcHRpb25TaG93W1wiK2luZm8rXCJdXCI7XHJcbiAgICAvLyAgICAgaWYgKCFpc1NlbGVjdCl7XHJcbiAgICAvLyAgICAgICAgIC8vaXNTZWxlY3TkuLpmYWxzZSDlpoLmnpzljbPlsIbooqvngrnkuq7vvIzliJnlsIblhbbkuIvmoIdpbmZv5Yqg5YWlb3B0aW9uU2hvd+aVsOe7hOeahGluZm/kvY3nva4g5Lul5L6/5Yig6Zmk55qE5pe25YCZ5aW95om+5YiwXHJcbiAgICAvLyAgICAgICAgIHRoYXQuc2V0RGF0YSh7XHJcbiAgICAvLyAgICAgICAgICAgICBbb3B0aW9uXTppbmZvXHJcbiAgICAvLyAgICAgICAgIH0pO1xyXG4gICAgLy8gICAgIH0gZWxzZSB7XHJcbiAgICAvLyAgICAgICAgIC8vIOS4unRydWXvvIzljbPlsIbooqvlj5bmtojvvIzliJnopoHmib7liLDlr7nlupRpbmZv5L2N572u5bCG5YW2572u56m6XHJcbiAgICAvLyAgICAgICAgIC8vIOi/memHjOi1i+WAvG51bGzmr5TotYvlgLx1bmRlZmluZWTlkoznqbropoHlpb1cclxuICAgIC8vICAgICAgICAgdGhhdC5zZXREYXRhKHtcclxuICAgIC8vICAgICAgICAgICAgIFtvcHRpb25dOm51bGxcclxuICAgIC8vICAgICAgICAgfSk7XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gICAgIC8vIOaUueWPmOagh+etvumAieS4reeKtuaAgVxyXG4gICAgLy8gICAgIHZhciBvcHRpb24gPSBcIm9wdGlvbltcIitpbmZvK1wiXS5pc1NlbGVjdFwiO1xyXG4gICAgLy8gICAgIHRoYXQuc2V0RGF0YSh7XHJcbiAgICAvLyAgICAgICAgIFtvcHRpb25dOiFpc1NlbGVjdFxyXG4gICAgLy8gICAgIH0pO1xyXG4gICAgLy8gICAgIC8vIOmBjeWOhm9wdGlvbu+8jOWmguaenOagh+etvumDveacquiiq+mAieS4re+8jOWImWxhYmVsQm945Li656m677yM6LWL57uZbGFiZWxCb3hJc051bGwg77yadHJ1ZSDlnKh3eG1s5LiK5LiN5LqI5pi+56S6XHJcbiAgICAvLyAgICAgbGV0IGlzTnVsbCA9IHRydWU7XHJcbiAgICAvLyAgICAgdGhhdC5kYXRhLm9wdGlvbi5mb3JFYWNoKChpdGVtOmFueSk9PntcclxuICAgIC8vICAgICAgICAgaWYgKGl0ZW0uaXNTZWxlY3QpIHtcclxuICAgIC8vICAgICAgICAgICAgIGlzTnVsbCA9IGZhbHNlO1xyXG4gICAgLy8gICAgICAgICB9XHJcbiAgICAvLyAgICAgfSlcclxuICAgIC8vICAgICB0aGF0LnNldERhdGEoe1xyXG4gICAgLy8gICAgICAgICBsYWJlbEJveElzTnVsbDppc051bGxcclxuICAgIC8vICAgICB9KTtcclxuICAgIC8vXHJcbiAgICAvLyB9LFxyXG4gICAgLy8g5p+l6K+i5omA5pyJ6KGM5Lia5oiW5oyJ6KGM5Lia5p+l6K+i5a6j6K6y5LyaXHJcbiAgICBnZXRBbGxCdXNpbmVzcyhidXNpbmVzcz86c3RyaW5nKXtcclxuICAgICAgICBjb25zdCB0aGF0ID0gdGhpcyBhcyBhbnk7XHJcbiAgICAgICAgaWYgKGJ1c2luZXNzKSB7XHJcbiAgICAgICAgICAgIC8vIOaMieihjOS4muafpeivolxyXG4gICAgICAgICAgICByZXF1ZXN0U2VydmljZS5nZXQoJ29ubGluZVByZXNlbnRhdGlvbnMvYnVzaW5lc3MvJyx7YnVzaW5lc3N9LHt9LHRydWUsdHJ1ZSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlcz0+e1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuc2V0RGF0YSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ubGluZVNlc3Npb246cmVzLmRhdGEuZGF0YVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIOaJgOaciVxyXG4gICAgICAgICAgICByZXF1ZXN0U2VydmljZS5nZXQoJ29ubGluZVByZXNlbnRhdGlvbnMvYnVzaW5lc3MvJyx7fSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlcz0+e1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuc2V0RGF0YSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbjpyZXMuZGF0YS5kYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgfSxcclxuICAgIC8vIOW+gOWxiueUn+etm+mAiVxyXG4gICAgaXNIaXN0b3J5KCl7XHJcbiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXMgYXMgYW55O1xyXG4gICAgICAgIGlmICh0aGF0LmRhdGEuaXNIaXN0b3J5ID09ICcnKXtcclxuICAgICAgICAgICAgdGhhdC5zZXREYXRhKHtcclxuICAgICAgICAgICAgICAgIGlzSGlzdG9yeTp0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgdGhhdC5zZXREYXRhKHtcclxuICAgICAgICAgICAgICAgIGlzSGlzdG9yeTohdGhhdC5kYXRhLmlzSGlzdG9yeVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSxcclxuICAgIC8vIOiOt+WPluWJqeS4i+mrmOW6pue7mXNjcm9sbHZpZXfnlKhcclxuICAgIGNvbXB1dGVTY3JvbGxWaWV3SGVpZ2h0KCkge1xyXG4gICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzIGFzIGFueTtcclxuICAgICAgICAvLyDov5Tlm57kuIDkuKogU2VsZWN0b3JRdWVyeSDlr7nosaHlrp7kvotcclxuICAgICAgICBsZXQgcXVlcnkgPSB3eC5jcmVhdGVTZWxlY3RvclF1ZXJ5KCk7XHJcbiAgICAgICAgLy8g5Zyo5b2T5YmN6aG16Z2i5LiL6YCJ5oup56ys5LiA5Liq5Yy56YWN6YCJ5oup5ZmoIHNlbGVjdG9yIOeahOiKgueCueOAgui/lOWbnuS4gOS4qiBOb2Rlc1JlZiDlr7nosaHlrp7kvovvvIzlj6/ku6XnlKjkuo7ojrflj5boioLngrnkv6Hmga9cclxuICAgICAgICBxdWVyeS5zZWxlY3QoJy5zd2lwZXItd3JhcCcpLmJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIHF1ZXJ5LnNlbGVjdCgnLmNvbnRlbnRIZWFkJykuYm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgLy8g5omn6KGM5omA5pyJ55qE6K+35rGC44CC6K+35rGC57uT5p6c5oyJ6K+35rGC5qyh5bqP5p6E5oiQ5pWw57uE77yM5ZyoY2FsbGJhY2vnmoTnrKzkuIDkuKrlj4LmlbDkuK3ov5Tlm55cclxuICAgICAgICBxdWVyeS5leGVjKHJlcyA9PiB7XHJcbiAgICAgICAgICAgIGxldCBzd2lwZXJIZWlnaHQgPSByZXNbMF0uaGVpZ2h0O1xyXG4gICAgICAgICAgICBsZXQgaGVhZEhlaWdodCA9IHJlc1sxXS5oZWlnaHQ7XHJcbiAgICAgICAgICAgIC8vIHd4LmdldFN5c3RlbUluZm9TeW5jKCkg5Y+v5Lul5b6X5Yiw6K6+5aSH55qE5ZCE56eN5L+h5oGv77yM5YWz5LqO6auY5bqm55qE5Y+C5pWw5pyJ5Lik5Liq77yM5LiA5Liq5piv5bGP5bmV6auY5bqmIHNjcmVlbkhlaWdodO+8jOS4gOS4quaYr+WPr+S9v+eUqOeql+WPo+mrmOW6piB3aW5kb3dIZWlnaHTjgILms6jmhI/orqHnrpfnmoTml7blgJnopoHnlKggd2luZG93SGVpZ2h077yM6L+Z5qC3566X5Ye65p2l55qE6auY5bqm5omN5piv5a+555qE44CCc2NyZWVuSGVpZ2h05piv5omL5py655qE5bGP5bmV6auY5bqm77yM5YyF5ZCr5LqG5omL5py655qE54q25oCB5qCP5ZKM5bCP56iL5bqP5qCH6aKY5qCP44CCXHJcbiAgICAgICAgICAgIGxldCB3aW5kb3dIZWlnaHQgPSB3eC5nZXRTeXN0ZW1JbmZvU3luYygpLndpbmRvd0hlaWdodDtcclxuICAgICAgICAgICAgLy8gNTDmmK90YWLpq5jluqZcclxuICAgICAgICAgICAgbGV0IHNjcm9sbEhlaWdodCA9IHdpbmRvd0hlaWdodCAtIHN3aXBlckhlaWdodCAtIGhlYWRIZWlnaHQgLSA1MDtcclxuICAgICAgICAgICAgdGhhdC5zZXREYXRhKHtcclxuICAgICAgICAgICAgICAgIHNjcm9sbEhlaWdodDogc2Nyb2xsSGVpZ2h0XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgIH0sXHJcbiAgICB0b0Nsb3VkKGU6YW55KXtcclxuICAgICAgICBjb25zdCB0aGF0ID0gdGhpcyBhcyBhbnk7XHJcbiAgICAgICAgbGV0IGluZm8gPSBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pbmZvO1xyXG4gICAgICAgIGxldCBkYXRhID0gdGhhdC5kYXRhLm9ubGluZVNlc3Npb25baW5mb107XHJcbiAgICAgICAgY29uc3Qgc2VuZERhdGEgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcclxuICAgICAgICB3eC5uYXZpZ2F0ZVRvKHtcclxuICAgICAgICAgICAgdXJsOicuLi9jbG91ZC9jbG91ZD9kYXRhPScgKyBzZW5kRGF0YVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn0pXHJcbiJdfQ==